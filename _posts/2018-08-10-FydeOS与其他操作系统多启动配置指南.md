---
date: 2018-07-30
title: FydeOS 与其它操作系统多启动配置指南
categories:
  - 使用技巧
type: Document
permalink: /recipes/dual-boot/
redirect_from:
  - /使用技巧/FydeOS与其他操作系统多启动配置指南/
---

> 注意：本教程假设你对 Linux 命令行操作并不陌生且具备最基本的操作技巧。若你觉得以下内容难以理解，请寻求身边朋友的帮助或者到 [FydeOS 中文社区](https://fydeos.com/community) 寻求帮助。


## 0. 准备工作
#### 适用对象

 本教程适用于希望将 FydeOS 作为 **第二系统** 安装进计算机里的用户，即目标设备上已有可运行的首选操作系统并可完成基本的磁盘操作。

#### 系统要求

 - 64 位 PC 一台，需支持 UEFI 并且以 UEFI 方式启动（CSM 模式开启或关闭均可）。
 - 硬盘以 GPT 方式分区，有至少 10GB 的剩余空间。
 - **全新安装**：硬盘剩余空间需以空闲空间的方式存在，而不是一个未使用的分区。为了避免误删除分区造成的数据丢失，安装脚本不会删除任何现有分区，所以需要安装者自行释放和准备好足够的剩余空间。
 - **升级安装**：硬盘已安装 FydeOS dualboot 模式的分区，其中 root 分区的容量不小于最新版本 root 分区的容量。


## 1. 为 FydeOS 腾出空间

你需要为即将被安装的 FydeOS 腾出至少 10G 的空闲磁盘空间。注意该空间必须以 **空闲空间** 的方式存在，而不是任何形式的空分区。

#### Windows 系统
可以直接使用系统自带的磁盘管理器对分区进行缩小操作，得到的自由空间留待安装操作即可。

#### macOS 系统
系统自带的 Disk Utility 工具可以缩小现有分区，但是得到的空余空间会自动划分为一个「Untitled」分区。需要再额外用其他的分区工具将这个「Untitled」分区删除得到空闲空间。这步可以在启动 FydeOS 后在 shell 中使用 fdisk、gdisk、parted 等工具完成。

#### Linux 系统
如果你会用 Linux 系统，那应该不需要额外的说明 :p


## 2. 安装你喜爱的引导启动管理器

如果你的设备并没有携带 UEFI 启动管理器，或你不想使用由系统默认提供的引导管理器，你需要安装一个额外的引导启动管理器程序。

这里我们推荐由 [Roderick W. Smith](mailto:rodsmith@rodsbooks.com) 维护的 [rEFInd](http://www.rodsbooks.com/refind/)。在 Windows 下安装和配置 rEFInd 可以参照 [这个教程](https://blog.csdn.net/windking21/article/details/50402933)；在 macOS 下安装和配置 rEFInd 可以参照 [这个教程](https://blog.csdn.net/xiaoshaxs/article/details/52016628)。下文中的安装脚本若检测到 rEFInd，会自动为 FydeOS 添加专有图标，彰显个性。

当然，[clover](https://sourceforge.net/projects/cloverefiboot/) 或 [efibootmgr](https://github.com/rhboot/efibootmgr) 亦是可用的选择。


## 3. 通过 USB 引导启动 FydeOS

通过 [该教程](https://fydeos.com/instructions-pc/) 将 FydeOS 进移动存储设备并用其引导启动系统。确保 FydeOS 在目标设备上运行状况良好，无明显硬件兼容性问题。


## 4. 进入 TTY Shell

**如果已经创建 FydeOS 本地账号并已登录系统，请退出当前用户的登录。**

同时按下键盘上 `Ctrl+Alt+F2` 键（在某些电脑上，比如 Apple Mac 上需要按下 `Fn+Ctrl+Alt+F2`，这时系统将会自动切换到 tty 命令行模式。若需要，可按 `Ctrl+Alt+F1`（或 `Fn+Ctrl+Alt+F1`）退回到图形界面模式。

请勿使用浏览器内的 Crosh Shell 执行以下操作，务必在登出用户的状态下切进 TTY Shell 以避免不可预见的磁盘读写错误。


## 5. 运行命令

<br>
#### 检查系统信息

首先需知道待安装 FydeOS 的硬盘设备名。可以使用如下命令来确认系统硬盘的信息如大小，现有分区情况等来帮助确认。

```bash
sudo fdisk -l
```
或者
```bash
sudo blkid
```
您 PC 里的物理硬盘将以 `sd*` 的形式显示。对大多数单硬盘系统，通常是 `/dev/sda`，如果是第二块硬盘，则是 `/dev/sdb`，依此类推。如果是 SSD，有可能是 `/dev/mmcblk0`。以下的命令将以 `/dev/sda` 为例。

<br>
#### 运行安装脚本

```bash
sudo dual-boot-install -d /dev/sda
```
安装脚本会检查系统是否符合要求，磁盘分区和剩余空间是否符合要求，然后开始创建分区和安装需要的文件。

脚本运行安装正常完成后，会提示已经结束。请重启系统，启动时会出现启动菜单，选择 FydeOS 启动即可。


<br>
#### 注意事项
 - 以上命令中，参数是整个磁盘，而不是分区。该命令会在你指定的磁盘上，利用你之前准备好的剩余空间，进行分区和安装操作；而不是在你指定的某个分区内进行安装。
 - 该安装脚本并不会帮助你安装引导启动管理器。
 - 很多 PC 由 BIOS 直接支持多重引导管理，因此不需要额外的引导管理器。但 rEFIind 可以提供一个更美化的可定制的图形界面。
 - MacBook Pro 等苹果设备只要在启动过程中按 OPTION 键可以选择 EFI 默认引导，直接引导 FydeOS。
 - 如果硬盘上已经装有 rEFInd，dualboot 安装程序会在安装过程中为 FydeOS 添加图标。

<br>
#### 升级硬盘内的 FydeOS 系统
与直接安装命令相同，脚本会跳过空白空间检查，但会检查老的 root 分区是否有足够的容量，如果新的版本 root 分区变大，将无法升级。请自行备份个人文件，卸载 FydeOS（见下文），并重新安装。


<br>
#### 卸载硬盘内的 FydeOS 系统
如果您不再希望在硬盘中保留 FydeOS 系统，请您自行备份系统中重要的个人文件，并在 TTY Shell 中，运行以下命令以卸载 FydeOS：
```bash
sudo dual-boot-remove -d /dev/sda
```
此命令也适用于安装失败后清除所有 FydeOS 在目标硬盘上的分区和引导器。


## 6. FAQ

> 安装需要多久?

正常情况下大约 10 分钟左右，视磁盘和 USB 启动设备的速度会有一定波动。


>全新安装会在系统上创建多少分区？

会新建 2 个分区。按 Chromium OS 的标准，会有 12 个分区，FydeOS 缩减为 2 个。


>多启动配置完成后，系统是否支持 OTA 升级？

对不起，在目前的多启动策略下，系统将不会支持 OTA，相关的服务会被屏蔽。若要在多启动状态下实现 OTA 升级，则需要创建很多个磁盘分区作为代价。因为分区不符合 Chromium OS 的标准，如果强行尝试通过 OTA 升级，将会有可能损坏硬盘上其他的分区。


>在多启动状态下升级 FydeOS 会不会导致用户数据丢失？

不会。请参照本教程「升级硬盘内的 FydeOS 系统」烧写新版系统到 U 盘上并成功引导启动，然后再次运行多启动安装脚本。程序会自动检测分区，升级系统分区，并且不会破坏用户文件分区。

**但我们仍然建议你在升级前备份数据！**



>安装过程安全不？会不会丢数据？

安装过程会做这么几件事情：
 - 创建需要的分区
 - 写入 FydeOS 必须的文件到新建的分区
 - 向 ESP 分区拷贝一些文件
 - 添加系统启动项

脚本不会做任何删除现有分区或者清空磁盘、分区表这类的操作。所以理论上还是相当安全的。当然，任何时候操作磁盘时都记得请先做好备份，或者用无价值的硬盘来做测试。我们不会为安装使用 FydeOS 造成的磁盘数据问题负任何责任哦。



>安装了 FydeOS，我还能再安装其他 OS 吗？

当然可以，不过你需要手动缩小 FydeOS 用户分区的容量，在后面插入其他分区。或者，删除前面其他 OS 的分区，为新的 OS 建立分区。FydeOS 在多启动模式下并不靠分区号记录自己的分区。