---
date: 2019-07-10
title: 给在移动存储设备上引导启动的 FydeOS 扩容
categories:
  - 使用技巧
type: Document
permalink: /recipes/expand-stateful-partition/
---


从通过 USB 方式连接设备的移动存储设备引导启动 FydeOS 时，如果系统判断你在使用的设备符合「可插拔式移动存储设备」，默认情况下会自动执行一个扩容脚本，将 `stateful` 分区自动扩大以致填满整个磁盘。但存在一些移动存储设备在固件级别不被系统认为是「可插拔式」（如一些型号的移动硬盘），为了最大程度保障设备上数据安全，我们关闭了对非可插拔式存储设备的自动扩容操作。如果需要，可以按以下步骤手动执行脚本完成。


>注意！以下描述的操作有可能会对硬盘的数据造成不可逆的丢失，该功能仍在测试阶段，我们无法对潜在的数据丢失以及安装中可能出现的各种问题负责或者提供及时的技术支持。请三思而后行！另外，本教程假设你对 Linux 命令行操作并不陌生且具备最基本的操作技巧。若你觉得以下内容难以理解，请寻求身边朋友的帮助或者到 [FydeOS 中文社区](https://fydeos.com/community) 寻求帮助。


## 0. 通过 USB 盘等方式引导启动 FydeOS for PC

请参照 [该教程](https://fydeos.com/instructions-pc/) 制作可以引导启动的 FydeOS for PC 并在目标 PC 上成功启动进入 FydeOS 的图形界面。

## 1. 进入终端

在 FydeOS for PC 图形界面出现之后，请同时按下键盘上 `Ctrl`+`Alt`+`F2` 键（在某些电脑上，比如 Apple Mac 上需要按下 `Fn`+`Ctrl`+`Alt`+`F2`，这时系统将会自动切换到 TTY 命令行模式。若需要，可按 `Ctrl`+`Alt`+`F1`（或 `Fn`+`Ctrl`+`Alt`+`F1`）退回到图形界面模式。

## 2. 登录系统

FydeOS 即将用命令行模式提示您输入用户名以及密码。请使用 `chronos` 用户名登录。默认情况下 FydeOS for PC 没有设置密码。

## 3. 确认目标磁盘

输入命令 `lsblk` 以获得目前装载的物理磁盘列表。通常情况下，系统能识别的物理磁盘设备将以 `sdX`、`mmcblkX`、`nvmeX` 的形式显示。根据提示的磁盘空间大小和已分区（FydeOS 有 12 个分区）的数量，请判断目前运行中的 FydeOS 所处的磁盘，比如 `sda`。以下的命令将以 `sda` 为例。

## 4. 运行扩容脚本

输入命令：

```
sudo expand-partition.sh --dst /dev/sda1
```

## 5. 脚本运行结束后

确认脚本运行状况的输出没有明显报错，扩容操作就完成了。
